{% extends 'layouts/base.html' %}
{% load static %}
{% block title%}
    Monitoring
{% endblock %}
<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
    {{ block.super }}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/themes/default/style.min.css" />
{% endblock stylesheets %}
{% block content %}

    <main class="main" id="top">
        <div class="container">
            <div class="row g-3 mb-3">
                <div class="col-lg-3">
                    <div class="card mb-3" style="height: 700px;">
                        <div class="card-header d-flex flex-between-center bg-light py-3">
                            <h6 class="mb-0">Data Setting</h6>
                        </div>
                        <div class="card-body py-5 py-sm-3">
                            <div class="row">
                                <!-- 트리구조  -->
                                <div id="jstree_div" style="overflow: auto;"></div>
                                <!-- /트리구조 -->
                            </div>
                            <i class="jtree-icon jstree-themeicon" role="presentation"></i>
                        </div>
                    </div>
                </div>
                <div class="col-lg-9">
                    <div class="card mb-3">
                        <div class="card-header d-flex flex-between-center bg-light py-3">
                            <h6 class="mb-0">Monitoring</h6>
                        </div>
                        <div class="card-body py-5 py-sm-3">
                            <div class="row g-5 g-sm-0">
                                <div class="col-sm-8">
                                    <div>
                                        <button type="button" onclick="monitoringStart()">START</button>
                                        <button type="button" onclick="monitoringStop()">STOP</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header d-flex flex-between-center bg-light py-3">
                            <h6 class="mb-0">Graph</h6>
                        </div>
                        <div class="card-body">
                            <canvas id="monitorCanvas"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
{% endblock %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
    {{ block.super }}
    <script src="{% static '/vendors/jstree/src/jstree.js' %}"></script>
    <script src="{% static '/vendors/list.js/list.min.js' %}"></script>
    <script src="{% static '/jsmeta/anomaly/monitoring.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        let treedata= "{{ treedata }}";
        treedata = JSON.parse(treedata.replace(/(&quot\;)/g,"\""));
        $('#jstree_div').jstree({
            "plugins" : [ "wholerow", "changed" ],
            'core' : {
                'data' : treedata
            }
        });
    </script>
    <script>

    </script>
{% endblock javascripts %}
